"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(e){var t=document.getElementsByTagName("script"),a=t[t.length-1].src;a=a.replace("landingcards_es5.js",""),a=a.replace("landingcards.js","");var i=void 0,n=void 0,o=0,r=0,d={init:function(t){var a=e(this);a.attr("class","landingcards"),c.getCards(a,t)},destroy:function(){}},c={getCards:function(t,a){var o="./"+a.data;e.getJSON(o,function(e){i=e.cards,n=e.settings,c.initCards(t,a),c.settings(t,a)})},initCards:function(e,t){i.forEach(function(a){c.setCard(e,a,t)}),o=0},setCard:function(e,t){var a=_.template('<div class="card" data-id="<%- id %>"></div>');console.info("new card");var i="card-"+o;e.append(a({id:i})),o+=1;var n=_.keys(t);c.setElements(e,t,n,i)},setElements:function(e,t,i,n){var o=e.find('.card[data-id="'+n+'"]'),d=void 0;r=0;var l=!0,p=!1,m=void 0;try{for(var f,u=function(){var e=f.value,n="element-"+r,l=_.template('<div class="element" data-id="<%- id %>"></div>');o.append(l({id:n}));var p=o.find('.element[data-id="'+n+'"]');switch(e){case"background":/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?o.css({background:"url("+t[e].file_mobile+") no-repeat center center fixed"}):o.css({background:"url("+t[e].file+") no-repeat center center fixed"}),o.css({"-webkit-background-size":"cover"}),o.css({"-moz-background-size":"cover"}),o.css({"-o-background-size":"cover"}),o.css({"background-size":"cover"}),p.remove();break;case"topnav":d=c.getTemplate("topnav.html"),d.then(function(i){o&&p.append(i({type:t[e].type,urlBase:a})).addClass("topnav")}).then(function(){s.startTopnav(p,t)});break;case"img":d=c.getTemplate("img.html"),d.then(function(a){o&&p.append(a({file:t[e].file,size:t[e].size,url:t[e].url})).addClass("image")});break;case"video":d=c.getTemplate("video.html"),d.then(function(a){o&&p.append(a({origin:t[e].origin,title:t[e].title,file:t[e].file,poster:t[e].poster,poster_mobile:t[e].poster_mobile})).addClass("video")}).then(function(){switch(t[e].origin){case"vimeo":s.startVideoVimeo(p);break;case"youtube":console.info("TODO: support youtube video");break;default:console.error("specified video origin - local, vimeo or youtube")}});break;case"description":d=c.getTemplate("description.html"),d.then(function(a){o&&p.append(a({type:t[e].type,text:t[e].text})).addClass("description")});break;case"title":d=c.getTemplate("title.html"),d.then(function(a){o&&p.append(a({type:t[e].type,text:t[e].text})).addClass("title")});break;case"accordeon":d=c.getTemplate("accordeon.html"),d.then(function(a){o&&p.append(a({title:t[e].title})).addClass("accordeon")}).then(function(){var a=p.find(".accordeon-box .content");a.landingcards({data:t[e].data}),s.startAccordeon(p)});break;case"footer":d=c.getTemplate("footer.html"),d.then(function(a){o&&p.append(a({logo:t[e].logo,address_img:t[e].address_img,address:t[e].address,phone_img:t[e].phone_img,phone:t[e].phone,email_img:t[e].email_img,email:t[e].email})).addClass("footer")});break;case"mockup":p.append('<div class="mockups_container"></div>');var m=p.find(".mockups_container");m.mockups({type:t[e].type,img:t[e].file,adjust:!1,reflection:!0})}r+=1,c.cardTemplateRules(t,o,i)},g=i[Symbol.iterator]();!(l=(f=g.next()).done);l=!0)u()}catch(v){p=!0,m=v}finally{try{!l&&g["return"]&&g["return"]()}finally{if(p)throw m}}},cardTemplateRules:function(e,t,a){var i=a.toString();switch(console.log("elementsArray: ",i),i){case"img":t.attr("data-tmpl","image-main");break;case"video":t.attr("data-tmpl","video-main");break;case"description":t.attr("data-tmpl","description-main");break;case"title":t.attr("data-tmpl","title-news");break;case"accordeon":t.attr("data-tmpl","accordeon-main");break;case"title,description,mockup":t.attr("data-tmpl","title-description-mockup");break;case"img,title,description":t.attr("data-tmpl","img-title-description");break;case"img,title,description,background":t.attr("data-tmpl","img-title-description-background");break;case"title,description":t.attr("data-tmpl","title-description");break;case"footer":t.attr("data-tmpl","footer")}},settings:function(e,t){c.cardsTemplate(e)},cardsTemplate:function(e){console.log("settings: ",n),e.attr("data-template",n.template)},getTemplate:function(t){return new Promise(function(i,n){e.get(a+"templates/"+t,function(e){i(_.template(e))}).fail(function(){n("no template")})})}},s={startTopnav:function(e,t){var a=t.topnav.type;switch(a){case"prev":var i=document.referrer,n=new XMLHttpRequest;n.onload=function(){var t=/<title>(.*?)<\/title>/m.exec(n.responseText)[1];e.find(".legend_left").html(t),e.find("a").attr("href",i)},n.open("GET",i+"?referrer="+document.referrer,!0),n.send();break;default:console.error("type not support!")}},startAccordeon:function(e){var t=e.find(".accordeon-title"),a=e.find(".accordeon-box"),i=t.find(".toggle-arrow");t.click(function(){a.toggleClass("hide"),i.toggleClass("close")})},startVideoVimeo:function(e){var t=e.find(".video-poster");t.click(function(){s.showVideoVimeo(e)})},showVideoVimeo:function(e){var t=e.find(".video-modal iframe")[0],a=$f(t);e.find(".video-modal").show(),a.api("play");var i=e.find(".back");i.click(function(){e.find(".video-modal").hide(),a.api("pause")})}};e.fn.landingcards=function(t){return d[t]?d[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!==("undefined"==typeof t?"undefined":_typeof(t))&&t?void e.error("Method "+t+" does not exist on jQuery.landingcards"):d.init.apply(this,arguments)}}(jQuery);