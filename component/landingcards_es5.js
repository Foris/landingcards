"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(e){var t=document.getElementsByTagName("script"),o=t[t.length-1].src;o=o.replace("landingcards_es5.js",""),o=o.replace("landingcards.js","");var n=void 0,i=0,a=0,d={init:function(t){var o=e(this);o.attr("class","landingcards"),r.getCards(o,t)},destroy:function(){}},r={getCards:function(t,o){var i="./"+o.data;e.getJSON(i,function(e){n=e.cards,r.initCards(t,o)})},initCards:function(e,t){console.log("cards: ",n),n.forEach(function(o){r.setCard(e,o,t)}),i=0},setCard:function(e,t){var o=_.template('<div class="card" data-id="<%- id %>"></div>');console.info("new card");var n="card-"+i;e.append(o({id:n})),i+=1;var a=_.keys(t);r.setElements(e,t,a,n)},setElements:function(e,t,o,n){var i=e.find('.card[data-id="'+n+'"]'),d=void 0;a=0;var c=!0,s=!1,f=void 0;try{for(var p,m=function(){var e=p.value;console.log("elements size: ",_.size(o));var n="element-"+a,c=_.template('<div class="element" data-id="<%- id %>"></div>');i.append(c({id:n}));var s=i.find('.element[data-id="'+n+'"]');switch(e){case"img":d=r.getTemplate("img.html"),d.then(function(o){i&&s.append(o({file:t[e].file,size:t[e].size,url:t[e].url})).addClass("image")});break;case"video":d=r.getTemplate("video.html"),d.then(function(o){i&&s.append(o({origin:t[e].origin,title:t[e].title,file:t[e].file,poster:t[e].poster})).addClass("video")}).then(function(){switch(t[e].origin){case"vimeo":l.startVideoVimeo(s);break;case"youtube":console.log("TODO: support youtube video");break;default:console.error("specified video origin - local, vimeo or youtube")}});break;case"description":d=r.getTemplate("description.html"),d.then(function(o){i&&s.append(o({type:t[e].type,text:t[e].text})).addClass("description")});break;case"title":d=r.getTemplate("title.html"),d.then(function(o){i&&s.append(o({type:t[e].type,text:t[e].text})).addClass("title")});break;case"accordeon":d=r.getTemplate("accordeon.html"),d.then(function(o){i&&s.append(o({title:t[e].title})).addClass("accordeon")}).then(function(){var o=s.find(".accordeon-box .content");o.landingcards({data:t[e].data}),l.startAccordeon(s)});break;case"footer":d=r.getTemplate("footer.html"),d.then(function(o){i&&s.append(o({logo:t[e].logo,address_img:t[e].address_img,address:t[e].address,phone_img:t[e].phone_img,phone:t[e].phone,email_img:t[e].email_img,email:t[e].email})).addClass("footer")})}console.log("element index: ",a),a+=1},u=o[Symbol.iterator]();!(c=(p=u.next()).done);c=!0)m()}catch(g){s=!0,f=g}finally{try{!c&&u["return"]&&u["return"]()}finally{if(s)throw f}}},getTemplate:function(t){return new Promise(function(n,i){e.get(o+"templates/"+t,function(e){n(_.template(e))}).fail(function(){i("no template")})})}},l={startAccordeon:function(e){var t=e.find(".accordeon-title"),o=e.find(".accordeon-box"),n=t.find(".toggle-arrow");t.click(function(){o.toggleClass("hide"),n.toggleClass("close")})},startVideoVimeo:function(e){var t=e.find(".video-poster");t.click(function(){l.showVideoVimeo(e)})},showVideoVimeo:function(e){var t=e.find(".video-modal iframe")[0],o=$f(t);e.find(".video-modal").show(),o.api("play"),console.log("player: ",o);var n=e.find(".back");n.click(function(){e.find(".video-modal").hide(),o.api("pause")})}};e.fn.landingcards=function(t){return d[t]?d[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!==("undefined"==typeof t?"undefined":_typeof(t))&&t?void e.error("Method "+t+" does not exist on jQuery.landingcards"):d.init.apply(this,arguments)}}(jQuery);