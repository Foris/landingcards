"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(e){var t=document.getElementsByTagName("script"),a=t[t.length-1].src;a=a.replace("landingcards_es5.js",""),a=a.replace("landingcards.js","");var i=void 0,o=0,n=0,r={init:function(t){var a=e(this);a.attr("class","landingcards"),d.getCards(a,t)},destroy:function(){}},d={getCards:function(t,a){var o="./"+a.data;e.getJSON(o,function(e){i=e.cards,d.initCards(t,a)})},initCards:function(e,t){i.forEach(function(a){d.setCard(e,a,t)}),o=0},setCard:function(e,t){var a=_.template('<div class="card" data-id="<%- id %>"></div>');console.info("new card");var i="card-"+o;e.append(a({id:i})),o+=1;var n=_.keys(t);d.setElements(e,t,n,i)},setElements:function(e,t,a,i){var o=e.find('.card[data-id="'+i+'"]'),r=void 0;n=0;var s=!0,l=!1,p=void 0;try{for(var m,f=function(){var e=m.value,i="element-"+n,s=_.template('<div class="element" data-id="<%- id %>"></div>');o.append(s({id:i}));var l=o.find('.element[data-id="'+i+'"]');switch(e){case"img":r=d.getTemplate("img.html"),r.then(function(a){o&&l.append(a({file:t[e].file,size:t[e].size,url:t[e].url})).addClass("image")});break;case"video":r=d.getTemplate("video.html"),r.then(function(a){o&&l.append(a({origin:t[e].origin,title:t[e].title,file:t[e].file,poster:t[e].poster})).addClass("video")}).then(function(){switch(t[e].origin){case"vimeo":c.startVideoVimeo(l);break;case"youtube":console.info("TODO: support youtube video");break;default:console.error("specified video origin - local, vimeo or youtube")}});break;case"description":r=d.getTemplate("description.html"),r.then(function(a){o&&l.append(a({type:t[e].type,text:t[e].text})).addClass("description")});break;case"title":r=d.getTemplate("title.html"),r.then(function(a){o&&l.append(a({type:t[e].type,text:t[e].text})).addClass("title")});break;case"accordeon":r=d.getTemplate("accordeon.html"),r.then(function(a){o&&l.append(a({title:t[e].title})).addClass("accordeon")}).then(function(){var a=l.find(".accordeon-box .content");a.landingcards({data:t[e].data}),c.startAccordeon(l)});break;case"footer":r=d.getTemplate("footer.html"),r.then(function(a){o&&l.append(a({logo:t[e].logo,address_img:t[e].address_img,address:t[e].address,phone_img:t[e].phone_img,phone:t[e].phone,email_img:t[e].email_img,email:t[e].email})).addClass("footer")});break;case"mockup":l.append('<div class="mockups_container"></div>');var p=l.find(".mockups_container");p.mockups({type:t[e].type,img:t[e].file,adjust:!1,reflection:!0})}n+=1,d.cardTemplateRules(t,o,a)},u=a[Symbol.iterator]();!(s=(m=u.next()).done);s=!0)f()}catch(g){l=!0,p=g}finally{try{!s&&u["return"]&&u["return"]()}finally{if(l)throw p}}},cardTemplateRules:function(e,t,a){console.log(a);var i=a.toString();switch(console.log("elementsArray: ",i),i){case"img":t.attr("data-tmpl","image-main");break;case"video":t.attr("data-tmpl","video-main");break;case"description":t.attr("data-tmpl","description-main");break;case"title":t.attr("data-tmpl","title-news");break;case"accordeon":t.attr("data-tmpl","accordeon-main");break;case"title,description,mockup":t.attr("data-tmpl","title-description-mockup");break;case"img,title,description":t.attr("data-tmpl","img-title-description");break;case"footer":t.attr("data-tmpl","footer")}console.log(t)},getTemplate:function(t){return new Promise(function(i,o){e.get(a+"templates/"+t,function(e){i(_.template(e))}).fail(function(){o("no template")})})}},c={startAccordeon:function(e){var t=e.find(".accordeon-title"),a=e.find(".accordeon-box"),i=t.find(".toggle-arrow");t.click(function(){a.toggleClass("hide"),i.toggleClass("close")})},startVideoVimeo:function(e){var t=e.find(".video-poster");t.click(function(){c.showVideoVimeo(e)})},showVideoVimeo:function(e){var t=e.find(".video-modal iframe")[0],a=$f(t);e.find(".video-modal").show(),a.api("play");var i=e.find(".back");i.click(function(){e.find(".video-modal").hide(),a.api("pause")})}};e.fn.landingcards=function(t){return r[t]?r[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!==("undefined"==typeof t?"undefined":_typeof(t))&&t?void e.error("Method "+t+" does not exist on jQuery.landingcards"):r.init.apply(this,arguments)}}(jQuery);